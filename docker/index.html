<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Install | Hello ;)</title>
    <meta name="description" content="Just playing around">
    <meta name="generator" content="VuePress 1.3.0">
    
    
    <link rel="preload" href="/notes-tips/assets/css/0.styles.d0e609a8.css" as="style"><link rel="preload" href="/notes-tips/assets/js/app.557ce569.js" as="script"><link rel="preload" href="/notes-tips/assets/js/2.d0218362.js" as="script"><link rel="preload" href="/notes-tips/assets/js/7.fc4a63bc.js" as="script"><link rel="prefetch" href="/notes-tips/assets/js/10.5b08dcb9.js"><link rel="prefetch" href="/notes-tips/assets/js/11.43ade1ee.js"><link rel="prefetch" href="/notes-tips/assets/js/12.f8bc895e.js"><link rel="prefetch" href="/notes-tips/assets/js/13.24d9da50.js"><link rel="prefetch" href="/notes-tips/assets/js/14.251b784d.js"><link rel="prefetch" href="/notes-tips/assets/js/15.70e2dcbb.js"><link rel="prefetch" href="/notes-tips/assets/js/16.a770eeac.js"><link rel="prefetch" href="/notes-tips/assets/js/17.ec392fa7.js"><link rel="prefetch" href="/notes-tips/assets/js/18.6ad3cce7.js"><link rel="prefetch" href="/notes-tips/assets/js/19.c437d1ea.js"><link rel="prefetch" href="/notes-tips/assets/js/20.3818af9a.js"><link rel="prefetch" href="/notes-tips/assets/js/21.c71aa5ff.js"><link rel="prefetch" href="/notes-tips/assets/js/22.3fdbb1e5.js"><link rel="prefetch" href="/notes-tips/assets/js/23.62dfaa37.js"><link rel="prefetch" href="/notes-tips/assets/js/24.5fac8cff.js"><link rel="prefetch" href="/notes-tips/assets/js/25.2cf37cc2.js"><link rel="prefetch" href="/notes-tips/assets/js/26.52485140.js"><link rel="prefetch" href="/notes-tips/assets/js/27.636c97a8.js"><link rel="prefetch" href="/notes-tips/assets/js/28.a0f23262.js"><link rel="prefetch" href="/notes-tips/assets/js/3.570f6e99.js"><link rel="prefetch" href="/notes-tips/assets/js/4.b9e1cdb8.js"><link rel="prefetch" href="/notes-tips/assets/js/5.74eeff93.js"><link rel="prefetch" href="/notes-tips/assets/js/6.095a5b90.js"><link rel="prefetch" href="/notes-tips/assets/js/8.75653bce.js"><link rel="prefetch" href="/notes-tips/assets/js/9.62c92631.js">
    <link rel="stylesheet" href="/notes-tips/assets/css/0.styles.d0e609a8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/notes-tips/" class="home-link router-link-active"><!----> <span class="site-name">Hello ;)</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/notes-tips/" class="nav-link">
  Init
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/notes-tips/" class="nav-link">
  Init
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/notes-tips/" class="sidebar-link">Tips documentation</a></li><li><a href="/notes-tips/javascript/" class="sidebar-link">Javascript</a></li><li><a href="/notes-tips/vue/" class="sidebar-link">Vue</a></li><li><a href="/notes-tips/docker/" class="active sidebar-link">Docker</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes-tips/docker/#install" class="sidebar-link">Install</a></li><li class="sidebar-sub-header"><a href="/notes-tips/docker/#run-hello-world" class="sidebar-link">Run hello world</a></li><li class="sidebar-sub-header"><a href="/notes-tips/docker/#contenedores" class="sidebar-link">Contenedores</a></li><li class="sidebar-sub-header"><a href="/notes-tips/docker/#ciclo-de-vida-de-los-contenedores" class="sidebar-link">Ciclo de vida de los contenedores</a></li><li class="sidebar-sub-header"><a href="/notes-tips/docker/#exponiendo-contenedores-al-mundo-exterior" class="sidebar-link">Exponiendo contenedores al mundo exterior</a></li><li class="sidebar-sub-header"><a href="/notes-tips/docker/#levantar-base-de-datos" class="sidebar-link">Levantar base de datos</a></li><li class="sidebar-sub-header"><a href="/notes-tips/docker/#docker-volumes" class="sidebar-link">Docker Volumes</a></li><li class="sidebar-sub-header"><a href="/notes-tips/docker/#imagenes" class="sidebar-link">Imagenes</a></li><li class="sidebar-sub-header"><a href="/notes-tips/docker/#dockerfile-node" class="sidebar-link">Dockerfile node</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="install"><a href="#install" class="header-anchor">#</a> Install</h2> <div class="language- extra-class"><pre class="language-text"><code>  https://docs.docker.com/engine/install/ubuntu/
</code></pre></div><h2 id="run-hello-world"><a href="#run-hello-world" class="header-anchor">#</a> Run hello world</h2> <div class="language- extra-class"><pre class="language-text"><code>docker run hello-world
</code></pre></div><p>La arquitectura de Docker funciona cliente - servidor y además utiliza <code>daemon</code> al conectarse con los contenedores.</p> <p>Client --&gt;  daemon --&gt; containers</p> <h2 id="contenedores"><a href="#contenedores" class="header-anchor">#</a> Contenedores</h2> <p>Un <code>contenedor</code> es una entidad lógica, una agrupación de procesos que se ejecutan de forma nativa como cualquier otra aplicación en la máquina host.</p> <p>Un contenedor ejecuta sus procesos de forma nativa. Lo único que comparte el contenedor con la máquina es el <code>kernel</code> del sistema operativo</p> <p>https://itnext.io/chroot-cgroups-and-namespaces-an-overview-37124d995e3d</p> <ul><li>Para listar todos los contenedores de Docker, utilizamos el comando:</li></ul> <div class="language- extra-class"><pre class="language-text"><code>docker ps -a
</code></pre></div><ul><li>Podemos inspeccionar un contenedor en específico utilizando:</li></ul> <div class="language- extra-class"><pre class="language-text"><code>docker inspect nombreDelContenedor
</code></pre></div><ul><li>Usando filtros</li></ul> <div class="language- extra-class"><pre class="language-text"><code>docker inspect -f '{{ json .Config.Env }}' nombreDelContenedor
</code></pre></div><ul><li>Renombrar contenedores</li></ul> <div class="language- extra-class"><pre class="language-text"><code>docker rename oldName newName
</code></pre></div><ul><li>no se pueden repetir los nombres pero si los id</li> <li>cada docker run genera un contenedor nuevo</li></ul> <div class="language- extra-class"><pre class="language-text"><code>docker logs nombre_contenedor
docker ps -aq // lista id contaniers
docker rm -f $(docker ps -aq) // borra dockers de la lista
</code></pre></div><ul><li>Levantar imagen de ubuntu</li></ul> <div class="language- extra-class"><pre class="language-text"><code>docker run ubuntu
docker run -it ubuntu // hacerlo de forma interactiva con la terminal
</code></pre></div><ul><li>Comandos dentro de la imagen ubuntu</li></ul> <div class="language- extra-class"><pre class="language-text"><code>ls -lac
uname -a
cat /etc/lsb-release
exit
</code></pre></div><h2 id="ciclo-de-vida-de-los-contenedores"><a href="#ciclo-de-vida-de-los-contenedores" class="header-anchor">#</a> Ciclo de vida de los contenedores</h2> <div class="language- extra-class"><pre class="language-text"><code>docker run ubuntu tail -f /dev/null
</code></pre></div><ul><li>Meterte dentro del contenedor</li></ul> <div class="language- extra-class"><pre class="language-text"><code>docker exec -it nombre_contenedor bash
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>ps -fea  // ver pid
docker rm -f nombre_contenedor // borra contenedor
docker kill nombre_contenedor // matar contenedor
</code></pre></div><h2 id="exponiendo-contenedores-al-mundo-exterior"><a href="#exponiendo-contenedores-al-mundo-exterior" class="header-anchor">#</a> Exponiendo contenedores al mundo exterior</h2> <p>Debemos redirigir los puertos del contenedor a los de la computadora y lo podemos hacer al utilizar este comando:</p> <p>--detach // si tiene un proceso que tiene output, no me interesa el output</p> <div class="language- extra-class"><pre class="language-text"><code>docker run -d --name server -p 8080:00  nombreDelContenedor

docker run -d --name server nginx

docker run -d --name server -p 8080:80 nginx //-p publish
</code></pre></div><h2 id="levantar-base-de-datos"><a href="#levantar-base-de-datos" class="header-anchor">#</a> Levantar base de datos</h2> <div class="language- extra-class"><pre class="language-text"><code>docker run -d --name db mongo
docker exec -it db bash
</code></pre></div><ul><li>Montar sistema de Archivos al contenedor.</li></ul> <div class="language- extra-class"><pre class="language-text"><code>mkdir mongodata // crear carpeta
ll //listar
pwd //encontrat directorio carpeta
docker run -d --name db -v directorio-mi-ordenador:dondequieroquesemonte-contenedor mongo
docker run -d --name db -v /home/kate/docker/mongo-data:/data/db mongo
docker inspect -f '{{ json .Config.Volumes }}' db
docker inspect -f '{{ json .Mounts }}' db
</code></pre></div><p>El sistema escribe en el sistema operativo y así cuando se mate el contenedor esta información no se pierde.</p> <h2 id="docker-volumes"><a href="#docker-volumes" class="header-anchor">#</a> Docker <a href="https://docs.docker.com/storage/" target="_blank" rel="noopener noreferrer">Volumes<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p>Esta herramienta nos permite recuperar datos que podíamos dar por perdido.</p> <p>Existen tres maneras de hacer permanencia de datos:</p> <p>Bind mount
Volume
tmpfs mount</p> <div class="language- extra-class"><pre class="language-text"><code> docker volume ls
 docker volume prune // limpiar volumenes que no estan usando lo contenedores
 docker volume create dbdata
 docker run -d --name db --mount src=nombrevolume,dst=dondemontar mongo
 docker run -d --name db --mount src=dbdata,dst=/data/db mongo
 docker exec -it db bash
 mongo
 exit
</code></pre></div><h2 id="imagenes"><a href="#imagenes" class="header-anchor">#</a> Imagenes</h2> <p>Imágenes son fundamentalmente plantillas o templates. Una imagen esta construida sobre ua una capa base y capas por encima</p> <ul><li>Obtener iamages</li></ul> <div class="language- extra-class"><pre class="language-text"><code>docker pull redis
docker image ls
</code></pre></div><p>repositorios de docker https://hub.docker.com/</p> <div class="language- extra-class"><pre class="language-text"><code>docker pull ubuntu:18.04
</code></pre></div><p>Para  crear nuestras propias imágenes, necesitamos un archivo llamado DockerFile que es lo que utiliza Docker para crear imágenes.</p> <p>**Es importante que el DockerFile siempre empiece con un ““FROM”” sino, no va a funcionar. **</p> <p>El flujo para construir en Docker siempre es así:
Dockerfile –&gt; **build ** –&gt; Imágen –&gt; run --&gt; Contenedor</p> <div class="language- extra-class"><pre class="language-text"><code>docker build -t ubuntu:test .
docker run -it ubuntu:test .
ls -lac /usr/src
docker tag ubuntu:test nilya4/ubuntu:test
docker push nilya4/ubuntu:test
</code></pre></div><ul><li>Historico imagen</li></ul> <div class="language- extra-class"><pre class="language-text"><code> docker history ubuntu:test
</code></pre></div><p>https://github.com/wagoodman/dive</p> <div class="language- extra-class"><pre class="language-text"><code> dive ubuntu:test
 ctrl+u
</code></pre></div><h2 id="dockerfile-node"><a href="#dockerfile-node" class="header-anchor">#</a> Dockerfile node</h2> <div class="language- extra-class"><pre class="language-text"><code>FROM node:8

COPY [&quot;package.json&quot;,&quot;package-lock.json&quot;, &quot;/usr/src/&quot;]

WORKDIR /usr/src

RUN npm install

COPY [&quot;.&quot;, &quot;/usr/src/&quot;]

EXPOSE 3000

CMD [&quot;node&quot;, &quot;index.js&quot;]

</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>docker build -t app .
docker run --rm -p 3000:3000 app
</code></pre></div><ul><li>Nodemon</li></ul> <div class="language- extra-class"><pre class="language-text"><code>CMD [&quot;npx&quot;, &quot;nodemon&quot;, &quot;index.js&quot;]

docker run --rm -p 3000:3000 {{path}}:/usr/src testapp
</code></pre></div><ul><li>Docker networking
Colaboración entre contenedores</li></ul> <div class="language- extra-class"><pre class="language-text"><code> docker network ls
 docker network create --attachable  testnet
</code></pre></div><p><code>--attachable</code> permitir que otros contenedores se conecten a esta red</p> <div class="language- extra-class"><pre class="language-text"><code> docker run -d --name db mongo
 docker network connect testnet db
 docker run -d --name app -p 3000:3000 --env MONGO_URL=mongodb//db:27017/test testapp
 docker network connect testnet app
 docker network rm testnet
</code></pre></div><ul><li><p>Docker compose
Es una herramienta que nos permite describir de forma declarativa la arquitectura de nuestra aplicación, utiliza <strong>composefile</strong> (docker-compose.yml).</p></li> <li><p><a href="https://docs.docker.com/compose/install/#install-compose" target="_blank" rel="noopener noreferrer">install<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li> <li><p><a href="https://docs.docker.com/compose/compose-file/compose-versioning/" target="_blank" rel="noopener noreferrer">version<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>  // version &gt; 2</p></li> <li><p><a href="https://docs.docker.com/compose/startup-order/" target="_blank" rel="noopener noreferrer">start<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li> <li><p>Services -&gt; componentes de la aplicación, pueden tener mas de un contenedor</p></li> <li><p>image, nombre de la imagen</p></li> <li><p>depende_on, depende de otro servicio</p></li> <li><p>ports: puerto</p></li></ul> <div class="language- extra-class"><pre class="language-text"><code>version:  &quot;3&quot;
services:
  app: 
    image: testapp
    enviroment:
      MONGO_URL: &quot;mongodb//db:27017/test&quot;
    depends_on:
      - db
    ports:
      - &quot;3000:3000&quot;
  db:
    image: mongo
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>docker-compose up
docker-compose ls
docker-compose logs app
docker-compose exec app bash
docker-compose down
</code></pre></div><p><em>Notes:</em> <em>Docker esta escrito en <strong>GO</strong></em></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/notes-tips/vue/" class="prev">
        Vue
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/notes-tips/assets/js/app.557ce569.js" defer></script><script src="/notes-tips/assets/js/2.d0218362.js" defer></script><script src="/notes-tips/assets/js/7.fc4a63bc.js" defer></script>
  </body>
</html>
